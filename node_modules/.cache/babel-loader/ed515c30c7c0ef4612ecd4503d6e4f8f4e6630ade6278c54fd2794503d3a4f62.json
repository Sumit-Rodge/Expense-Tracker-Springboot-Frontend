{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StreamDescription = void 0;\nconst bson_1 = require(\"../bson\");\nconst common_1 = require(\"../sdam/common\");\nconst server_description_1 = require(\"../sdam/server_description\");\nconst RESPONSE_FIELDS = ['minWireVersion', 'maxWireVersion', 'maxBsonObjectSize', 'maxMessageSizeBytes', 'maxWriteBatchSize', 'logicalSessionTimeoutMinutes'];\n/** @public */\nclass StreamDescription {\n  constructor(address, options) {\n    this.hello = null;\n    this.address = address;\n    this.type = common_1.ServerType.Unknown;\n    this.minWireVersion = undefined;\n    this.maxWireVersion = undefined;\n    this.maxBsonObjectSize = 16777216;\n    this.maxMessageSizeBytes = 48000000;\n    this.maxWriteBatchSize = 100000;\n    this.logicalSessionTimeoutMinutes = options?.logicalSessionTimeoutMinutes;\n    this.loadBalanced = !!options?.loadBalanced;\n    this.compressors = options && options.compressors && Array.isArray(options.compressors) ? options.compressors : [];\n    this.serverConnectionId = null;\n  }\n  receiveResponse(response) {\n    if (response == null) {\n      return;\n    }\n    this.hello = response;\n    this.type = (0, server_description_1.parseServerType)(response);\n    if ('connectionId' in response) {\n      this.serverConnectionId = this.parseServerConnectionID(response.connectionId);\n    } else {\n      this.serverConnectionId = null;\n    }\n    for (const field of RESPONSE_FIELDS) {\n      if (response[field] != null) {\n        this[field] = response[field];\n      }\n      // testing case\n      if ('__nodejs_mock_server__' in response) {\n        this.__nodejs_mock_server__ = response['__nodejs_mock_server__'];\n      }\n    }\n    if (response.compression) {\n      this.compressor = this.compressors.filter(c => response.compression?.includes(c))[0];\n    }\n  }\n  /* @internal */\n  parseServerConnectionID(serverConnectionId) {\n    // Connection ids are always integral, so it's safe to coerce doubles as well as\n    // any integral type.\n    return bson_1.Long.isLong(serverConnectionId) ? serverConnectionId.toBigInt() :\n    // @ts-expect-error: Doubles are coercible to number\n    BigInt(serverConnectionId);\n  }\n}\nexports.StreamDescription = StreamDescription;","map":{"version":3,"names":["bson_1","require","common_1","server_description_1","RESPONSE_FIELDS","StreamDescription","constructor","address","options","hello","type","ServerType","Unknown","minWireVersion","undefined","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes","loadBalanced","compressors","Array","isArray","serverConnectionId","receiveResponse","response","parseServerType","parseServerConnectionID","connectionId","field","__nodejs_mock_server__","compression","compressor","filter","c","includes","Long","isLong","toBigInt","BigInt","exports"],"sources":["C:\\Users\\sumit\\Desktop\\Final project\\Expense-Tracker-Springboot-Frontend\\node_modules\\mongodb\\src\\cmap\\stream_description.ts"],"sourcesContent":["import { type Document, type Double, Long } from '../bson';\r\nimport { ServerType } from '../sdam/common';\r\nimport { parseServerType } from '../sdam/server_description';\r\nimport type { CompressorName } from './wire_protocol/compression';\r\n\r\nconst RESPONSE_FIELDS = [\r\n  'minWireVersion',\r\n  'maxWireVersion',\r\n  'maxBsonObjectSize',\r\n  'maxMessageSizeBytes',\r\n  'maxWriteBatchSize',\r\n  'logicalSessionTimeoutMinutes'\r\n] as const;\r\n\r\n/** @public */\r\nexport interface StreamDescriptionOptions {\r\n  compressors?: CompressorName[];\r\n  logicalSessionTimeoutMinutes?: number;\r\n  loadBalanced: boolean;\r\n}\r\n\r\n/** @public */\r\nexport class StreamDescription {\r\n  address: string;\r\n  type: string;\r\n  minWireVersion?: number;\r\n  maxWireVersion?: number;\r\n  maxBsonObjectSize: number;\r\n  maxMessageSizeBytes: number;\r\n  maxWriteBatchSize: number;\r\n  compressors: CompressorName[];\r\n  compressor?: CompressorName;\r\n  logicalSessionTimeoutMinutes?: number;\r\n  loadBalanced: boolean;\r\n\r\n  __nodejs_mock_server__?: boolean;\r\n\r\n  zlibCompressionLevel?: number;\r\n  serverConnectionId: bigint | null;\r\n\r\n  public hello: Document | null = null;\r\n\r\n  constructor(address: string, options?: StreamDescriptionOptions) {\r\n    this.address = address;\r\n    this.type = ServerType.Unknown;\r\n    this.minWireVersion = undefined;\r\n    this.maxWireVersion = undefined;\r\n    this.maxBsonObjectSize = 16777216;\r\n    this.maxMessageSizeBytes = 48000000;\r\n    this.maxWriteBatchSize = 100000;\r\n    this.logicalSessionTimeoutMinutes = options?.logicalSessionTimeoutMinutes;\r\n    this.loadBalanced = !!options?.loadBalanced;\r\n    this.compressors =\r\n      options && options.compressors && Array.isArray(options.compressors)\r\n        ? options.compressors\r\n        : [];\r\n    this.serverConnectionId = null;\r\n  }\r\n\r\n  receiveResponse(response: Document | null): void {\r\n    if (response == null) {\r\n      return;\r\n    }\r\n    this.hello = response;\r\n    this.type = parseServerType(response);\r\n    if ('connectionId' in response) {\r\n      this.serverConnectionId = this.parseServerConnectionID(response.connectionId);\r\n    } else {\r\n      this.serverConnectionId = null;\r\n    }\r\n    for (const field of RESPONSE_FIELDS) {\r\n      if (response[field] != null) {\r\n        this[field] = response[field];\r\n      }\r\n\r\n      // testing case\r\n      if ('__nodejs_mock_server__' in response) {\r\n        this.__nodejs_mock_server__ = response['__nodejs_mock_server__'];\r\n      }\r\n    }\r\n\r\n    if (response.compression) {\r\n      this.compressor = this.compressors.filter(c => response.compression?.includes(c))[0];\r\n    }\r\n  }\r\n\r\n  /* @internal */\r\n  parseServerConnectionID(serverConnectionId: number | Double | bigint | Long): bigint {\r\n    // Connection ids are always integral, so it's safe to coerce doubles as well as\r\n    // any integral type.\r\n    return Long.isLong(serverConnectionId)\r\n      ? serverConnectionId.toBigInt()\r\n      : // @ts-expect-error: Doubles are coercible to number\r\n        BigInt(serverConnectionId);\r\n  }\r\n}\r\n"],"mappings":";;;;;;AAAA,MAAAA,MAAA,GAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AACA,MAAAE,oBAAA,GAAAF,OAAA;AAGA,MAAMG,eAAe,GAAG,CACtB,gBAAgB,EAChB,gBAAgB,EAChB,mBAAmB,EACnB,qBAAqB,EACrB,mBAAmB,EACnB,8BAA8B,CACtB;AASV;AACA,MAAaC,iBAAiB;EAoB5BC,YAAYC,OAAe,EAAEC,OAAkC;IAFxD,KAAAC,KAAK,GAAoB,IAAI;IAGlC,IAAI,CAACF,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACG,IAAI,GAAGR,QAAA,CAAAS,UAAU,CAACC,OAAO;IAC9B,IAAI,CAACC,cAAc,GAAGC,SAAS;IAC/B,IAAI,CAACC,cAAc,GAAGD,SAAS;IAC/B,IAAI,CAACE,iBAAiB,GAAG,QAAQ;IACjC,IAAI,CAACC,mBAAmB,GAAG,QAAQ;IACnC,IAAI,CAACC,iBAAiB,GAAG,MAAM;IAC/B,IAAI,CAACC,4BAA4B,GAAGX,OAAO,EAAEW,4BAA4B;IACzE,IAAI,CAACC,YAAY,GAAG,CAAC,CAACZ,OAAO,EAAEY,YAAY;IAC3C,IAAI,CAACC,WAAW,GACdb,OAAO,IAAIA,OAAO,CAACa,WAAW,IAAIC,KAAK,CAACC,OAAO,CAACf,OAAO,CAACa,WAAW,CAAC,GAChEb,OAAO,CAACa,WAAW,GACnB,EAAE;IACR,IAAI,CAACG,kBAAkB,GAAG,IAAI;EAChC;EAEAC,eAAeA,CAACC,QAAyB;IACvC,IAAIA,QAAQ,IAAI,IAAI,EAAE;MACpB;;IAEF,IAAI,CAACjB,KAAK,GAAGiB,QAAQ;IACrB,IAAI,CAAChB,IAAI,GAAG,IAAAP,oBAAA,CAAAwB,eAAe,EAACD,QAAQ,CAAC;IACrC,IAAI,cAAc,IAAIA,QAAQ,EAAE;MAC9B,IAAI,CAACF,kBAAkB,GAAG,IAAI,CAACI,uBAAuB,CAACF,QAAQ,CAACG,YAAY,CAAC;KAC9E,MAAM;MACL,IAAI,CAACL,kBAAkB,GAAG,IAAI;;IAEhC,KAAK,MAAMM,KAAK,IAAI1B,eAAe,EAAE;MACnC,IAAIsB,QAAQ,CAACI,KAAK,CAAC,IAAI,IAAI,EAAE;QAC3B,IAAI,CAACA,KAAK,CAAC,GAAGJ,QAAQ,CAACI,KAAK,CAAC;;MAG/B;MACA,IAAI,wBAAwB,IAAIJ,QAAQ,EAAE;QACxC,IAAI,CAACK,sBAAsB,GAAGL,QAAQ,CAAC,wBAAwB,CAAC;;;IAIpE,IAAIA,QAAQ,CAACM,WAAW,EAAE;MACxB,IAAI,CAACC,UAAU,GAAG,IAAI,CAACZ,WAAW,CAACa,MAAM,CAACC,CAAC,IAAIT,QAAQ,CAACM,WAAW,EAAEI,QAAQ,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAExF;EAEA;EACAP,uBAAuBA,CAACJ,kBAAmD;IACzE;IACA;IACA,OAAOxB,MAAA,CAAAqC,IAAI,CAACC,MAAM,CAACd,kBAAkB,CAAC,GAClCA,kBAAkB,CAACe,QAAQ,EAAE;IAC7B;IACAC,MAAM,CAAChB,kBAAkB,CAAC;EAChC;;AAxEFiB,OAAA,CAAApC,iBAAA,GAAAA,iBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}